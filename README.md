## LazyShell — small collection of helper shell scripts

[![License: Apache 2.0](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](https://opensource.org/licenses/Apache-2.0) [![Shell Script](https://img.shields.io/badge/Script-Shell-blue.svg)](https://www.shellscript.sh/)

LazyShell is a lightweight set of personal shell utilities that make common developer tasks quicker: installing small CLI scripts system-wide, quick git helpers, repo info, Python helpers, and a shortcut manager.

These descriptions were generated by reading each script in the repository on 2025-10-16 to ensure the README matches the current behavior.

### Quick install

Install everything quickly from the repo root:

```bash
bash ./activation
```

`activation` will copy regular (non-hidden) files from the current directory to `/usr/local/bin`, skip README/LICENSE/activation itself, make the files executable, and attempt to self-update via `gitupdate LazyShell` if `gitupdate` is available. It requires `sudo` to write to `/usr/local/bin`.

Manual install example:

```bash
sudo cp <script> /usr/local/bin/
sudo chmod +x /usr/local/bin/<script>
```

### Included scripts (accurate descriptions)

- `activation` — Copy regular files in the current directory to `/usr/local/bin`, make them executable, skip certain files (README.md, LICENSE, activation). Supports `-h|--help` and tries to run `gitupdate LazyShell` if available.

- `del` — Flexible removal helper. Usage patterns:
  - `del <name>` — tries `sudo apt remove -y <name>` (if apt available) or falls back to `rm -i <name>`.
  - `del -p <name>` — purge package (`apt purge -y`) or `rm -f <name>`.
  - `del -dir <directory>` — remove a directory after confirmation (`rm -r`).
  - `del -pdir <directory>` — purge a directory (`rm -rf`) after explicit confirmation.
  - The script refuses to delete protected system directories and validates directory paths. It will prompt before destructive directory operations.

- `gitauto` — Walks a directory tree (or the current directory by default), finds Git repositories (`.git` folders), and for each repo with changes: stages all changes, auto-commits with a generated message summarizing added/modified/deleted counts, and pushes to `origin` if a remote exists. Useful for batch committing multiple local repos.

- `gitid` — Interactive Git identity helper:
  - No args: prompts to set a GLOBAL git identity (name/email), optionally GitHub username; saves a small file at `~/.gitid`.
  - `--local`: prompt to set repository-local git identity (runs `git config user.name` and `user.email` without `--global`).
  - `--view`: print the current global identity and any saved GitHub username from `~/.gitid`.

- `gitstat` — Show detailed Git information for the current directory or a provided repo path. Prints current branch, short status, recent 5 commits, remotes, and recent reflog entries. `-h|--help` shows usage.

- `gitupdate` — Update a repository from its remote. Modes:
  - `gitupdate` (no args): update the current repo (must be run inside a git repo). Fetches and hard-resets to `origin/<current-branch>`.
  - `gitupdate <directory>`: the same update for the specified repo directory.
  - `gitupdate <repo_url> <local_path> <file_path>`: clone if missing, or update and optionally check for the presence of `<file_path>` inside `<local_path>`.

- `inforepo` — Show repo metadata for the current directory or a specified path:
  - Prints first commit author/date (approx repo creation info), remote URL, approximate clone date (best-effort via reflog), and a lines-of-code summary using `cloc` when available or a fallback line-count by file extension.

- `py` — Python runner and bootstrapper:
  - Ensures `python3` and `pip3` are installed (attempts install via `apt`/`dnf`/`yum` if missing).
  - `py pyver` prints Python and pip versions.
  - Otherwise runs `python3 <args...>`.

- `pyinstall` — Install Python packages:
  - `pyinstall <name>` uses `sudo apt install -y python3-<name>` (system package) by default.
  - `pyinstall -f <package>` forces installation with `pip` using `--break-system-packages` after an explicit confirmation (dangerous; warns the user).

- `pyver` — Ensure `python3` and `pip3` are present (installs them if needed) and print their versions.

- `rmv` — Preview `apt autoremove` (runs `sudo apt -s autoremove` to simulate), then prompts to actually run `sudo apt autoremove`.

- `st` — Shortcut manager:
  - `st` launches interactive creation: prompts for a command and a shortcut name, validates the name, writes a small script to `~/.shortcuts/<name>`, `chmod +x` it, then symlinks it into `/usr/local/bin` (requires sudo for the link).
  - `st --del <name>` deletes the shortcut file and the `/usr/local/bin` link. Note: the script recognizes `--del` for deletion.
  - `st --help` shows usage. The script also accepts the short `-h` help flag (single dash) for convenience.
  - Tip: if you habitually type a single dash (e.g. `-del`) out of laziness, be aware that only `-h` is supported as a single-dash shorthand; use `--del <name>` to delete shortcuts.

- `upt` — Preview `apt upgrade` (runs `sudo apt -s upgrade` to simulate), then prompts to run `sudo apt upgrade`.

### Examples

Install all scripts to your PATH:

```bash
bash ./activation
```

Create a simple shortcut called `hello`:

```bash
st
# follow prompts: command 'echo Hello', name 'hello'
hello
```

Batch auto-commit repositories under a directory:

```bash
gitauto /path/to/search
```

Show repo info for another repo:

```bash
inforepo /path/to/project
```

### Notes & safety

- Many scripts use `sudo` for system changes (installing to `/usr/local/bin`, apt operations, and linking in `/usr/local/bin`). Run them only when you understand the effect.
- `del` refuses to remove protected system directories and always prompts for destructive directory removal.
- `pyinstall -f` uses `pip --break-system-packages` and can break system Python environments — it requires confirmation.
- `activation` will overwrite files with the same name in `/usr/local/bin`.

### Contributing

If you find a bug or want improvements:

- Open an issue describing the desired change.
- Send a PR with focused changes and brief tests or usage examples when appropriate.

### License

This repository is licensed under the Apache License 2.0. See the `LICENSE` file for details.

